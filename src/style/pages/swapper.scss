@use '../components/currency-dropdown';
@use '../components/currency-field';
@use '../components/simple-fee-screen';

.swap-panel {
  @apply text-white max-w-full w-[590px] relative;

  &__card {
    @apply py-3 px-[20px] rounded-xl;
    background: rgba(255, 255, 255, 0.1);

    &__header {
      @apply flex flex-row items-center justify-between mb-[12px];
    }

    &__title {
      @apply text-[14px] font-bold uppercase;
    }

    &__wallet {
      .base-button {
        @apply transition-all p-0 h-auto;

        &:hover .base-button__content {
          @apply opacity-100;
        }

        &__content {
          @apply opacity-75;
        }
      }
    }

    &__body {
      @apply flex justify-between gap-5 w-full;
    }
  }

  &__toggle {
    @apply m-auto flex justify-center h-2 relative -top-[18px];

    &__button {
      @apply h-[44px] w-[44px] p-0 flex items-center justify-center rounded-full bg-black;

      border: 1px solid rgba(255, 255, 255, 0.2);
    }
  }

  &__input-wrapper {
    .invalid-feedback div {
      @apply justify-end flex-wrap;
    }
  }

  &__input {
    @apply border-none !p-0 bg-transparent text-right h-8 min-h-0 appearance-none font-medium !bg-none;

    font-size: 32px;

    &::placeholder {
      @apply opacity-30;
    }
    &:focus {
      @apply bg-transparent shadow-none;
    }
    &.is-invalid {
      @apply text-red;
    }
  }

  &__label {
    @apply w-full text-right opacity-50;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
  }

  .use-external {
    @apply basis-full mx-auto text-right hover:no-underline;

    color: rgb(255 108 108 / var(--tw-text-opacity, 1));
  }

  &__group {
    @apply flex flex-col gap-[2px];

    /* Apply only if there are at least two VISIBLE cards (ignore .d-none) */
    &:has(> .swap-panel__card:not(.d-none) + .swap-panel__card:not(.d-none)) {
      /* Not the first visible card → remove top radius */
      .swap-panel__card:nth-child(n + 2 of .swap-panel__card:not(.d-none)) {
        @apply rounded-t-none;
      }
      /* Not the last visible card → remove bottom radius */
      .swap-panel__card:nth-last-child(n + 2 of .swap-panel__card:not(.d-none)) {
        @apply rounded-b-none;
      }
    }
  }
  &__action {
    @apply w-full mt-6 h-[48px];

    &.btn-primary {
      @apply h-[64px];
    }
  }
}

.swap-connected-wallet {
  @apply flex;
}

.vetified-by {
  @apply text-[14px] opacity-75 mt-[32px];

  .icon-verified {
    @apply text-[17px] mr-2;
  }

  img {
    @apply h-[16px] ml-[5px];
  }
}

.wallet-address {
  & {
    @apply flex gap-6 w-full items-center;
  }

  &__title {
    @apply font-semibold text-xs leading-[16px] text-center uppercase opacity-50;
    letter-spacing: 0.07em;
  }

  &__body {
    @apply flex flex-col gap-1 items-start flex-1;
  }

  &__form {
    @apply w-full;

    input {
      @apply border-0 p-0 bg-transparent;
      &::placeholder {
        @apply text-white/30;
      }
      &:focus {
        outline: none;
        box-shadow: none !important;
        background-color: transparent;
      }
    }
  }

  &__form.with-inline-icon {
    .input-group {
      position: relative;
    }

    /* Add space for the icon inside the input */
    .form-control {
      padding-right: 1.75rem !important;
    }

    /* Render the input-group-text (our icon wrapper) inside the input field */
    .input-group-text {
      @apply text-green p-0 absolute border border-green border-solid flex items-center justify-center;

      background-color: rgba(49, 73, 58, 0.8) !important;
      border-radius: 100% !important;
      border-color: rgba(64, 231, 45, 0.8) !important;
      font-size: 7px;
      width: 17px;
      height: 17px;
      top: 3px;
      line-height: 1;
      pointer-events: none;
    }

    /* Make sure the icon itself is centered nicely */
    .input-group-text .icon {
      display: inline-block;
    }
  }

  &__action__button {
    @apply bg-white/10 hover:bg-white/20 text-white/50 p-[10px] no-underline rounded-lg w-[40px] h-[40px] flex items-center justify-center transition-all;

    .icon-disconnect {
      @apply text-[18px];
    }
  }

  .form-control:disabled {
    @apply bg-transparent;
  }

  .valid-feedback {
    @apply text-green;
  }
}

.swap-steps {
  @apply rounded-2xl flex flex-col pt-[20px] pb-1;

  &__data {
    @apply flex justify-between items-start px-6 mb-8 relative;

    &__in,
    &__out {
      @apply flex-1;
    }

    &__in {
      @apply flex justify-start;
    }

    &__out {
      @apply flex justify-end;
    }

    &__arrow {
      @apply absolute opacity-50 w-[15px] left-0 right-0 top-0 bottom-0 m-auto flex items-center;
    }
  }

  &__indicator {
    background-color: rgb(255 255 255 / 0.05);
    @apply py-6 rounded-lg flex justify-around items-center gap-4 relative;

    &__text {
      @apply mt-[12px];
    }

    &__icon {
      @apply w-[40px] h-[40px] rounded-full border-2 border-solid border-white/30 flex items-center justify-center leading-none;

      &.is-failed {
        @apply border-red text-red bg-red/10;
      }

      &.is-success {
        @apply border-green text-green bg-green/10;
      }
    }
  }

  &__dots {
    @apply flex items-center gap-[20px] absolute pointer-events-none top-[42px];

    &.is-success {
      .swap-steps__dot {
        @apply bg-white;
      }
    }
  }

  &__dot {
    @apply w-1 h-1 rounded-full bg-white/20;
  }

  &__address {
    @apply w-full flex justify-between px-3 py-2 mb-3 text-[14px] rounded-[4px];

    border: 1px solid rgba(255, 255, 255, 0.1);
  }
}

.swap-steps-wallet {
  @apply flex items-center gap-3;

  &__icon {
    @apply w-8 h-8 rounded-full flex items-center justify-center relative;

    &__img {
      @apply w-8 h-8 object-contain;
    }

    &__currency {
      @apply absolute w-4 h-4 object-contain -right-1 -bottom-1;
    }
  }

  &__ammounts {
    @apply flex flex-col items-start;

    &__original {
      @apply text-[18px] font-semibold text-white leading-none;
    }

    &__dolars {
      @apply text-[14px] opacity-50;
    }
  }

  &__address {
    @apply text-xs opacity-50 max-w-[150px] truncate;
  }
}
